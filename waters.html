<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-TK0ZMTQ9X9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-TK0ZMTQ9X9');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Browse All Waters - NM Stocking Report</title>
    <meta name="description" content="Browse all 168 water bodies in New Mexico with fish stocking data. Find lakes, ponds, and rivers stocked by NM Game & Fish.">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Favicon and Social Media Meta Tags -->
    <link rel="icon" href="/logo.png" type="image/png">
    <link rel="apple-touch-icon" href="/logo.png">
    <meta property="og:title" content="Browse All Waters - NM Stocking Report">
    <meta property="og:description" content="Browse all water bodies in New Mexico with fish stocking data.">
    <meta property="og:image" content="https://stockingreport.com/og-image.png">
    <meta property="og:url" content="https://stockingreport.com/waters.html">
    <meta name="twitter:card" content="summary_large_image">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f0f4f8;
            background-image: linear-gradient(rgba(240, 244, 248, 0.9), rgba(240, 244, 248, 0.9)), url('https://images.unsplash.com/photo-1541783244259-83568194458f?q=80&w=2070');
            background-attachment: fixed;
            background-size: cover;
        }

        /* Skeleton loader animations */
        @keyframes shimmer {
            0% { background-position: -1000px 0; }
            100% { background-position: 1000px 0; }
        }

        .skeleton {
            animation: shimmer 2s infinite linear;
            background: linear-gradient(to right, #e5e7eb 4%, #f3f4f6 25%, #e5e7eb 36%);
            background-size: 1000px 100%;
        }

        .skeleton-text {
            height: 1rem;
            border-radius: 0.25rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body class="text-gray-800">

    <div class="container mx-auto p-4 md:p-8 max-w-5xl">

        <header class="flex items-center justify-center mb-8">
            <a href="/"><img src="/logo.png" alt="Stocking Report Logo" class="h-16 w-16 mr-4"></a>
            <div>
                <h1 class="text-4xl md:text-5xl font-bold text-blue-800 text-left"><a href="/" class="hover:text-blue-700 transition">NM Stocking Report</a></h1>
                <p class="text-gray-600 mt-1 text-left">Your source for the latest New Mexico fish stocking information.</p>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="mb-8 bg-white/90 backdrop-blur-sm rounded-xl shadow-lg p-4">
            <div class="flex flex-wrap justify-center gap-4 text-sm md:text-base">
                <a href="/" class="text-blue-600 hover:text-blue-800 font-medium transition-colors">Home</a>
                <span class="text-gray-400">•</span>
                <a href="/waters.html" class="text-blue-800 font-semibold">Browse All Waters</a>
                <span class="text-gray-400">•</span>
                <a href="/about.html" class="text-blue-600 hover:text-blue-800 font-medium transition-colors">About</a>
                <span class="text-gray-400">•</span>
                <a href="/contact.html" class="text-blue-600 hover:text-blue-800 font-medium transition-colors">Contact</a>
                <span class="text-gray-400">•</span>
                <a href="/privacy.html" class="text-blue-600 hover:text-blue-800 font-medium transition-colors">Privacy Policy</a>
            </div>
        </nav>

        <main class="bg-white/90 backdrop-blur-sm rounded-xl shadow-lg p-6 md:p-10">
            <h2 class="text-3xl font-bold text-gray-800 mb-4">Browse All Waters</h2>
            <p class="text-gray-600 mb-6">
                Explore all <span id="water-count" class="font-semibold">168</span> water bodies in New Mexico with fish stocking data. Click any water to view its complete stocking history.
            </p>

            <!-- Skeleton loader -->
            <div id="skeleton-loader" class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4">
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
                <div class="skeleton skeleton-text"></div>
            </div>

            <!-- Actual content -->
            <div id="waters-list" class="hidden columns-2 md:columns-3 lg:columns-4 gap-x-6">
                <!-- Links will be populated by JavaScript -->
            </div>
        </main>

        <footer class="text-center mt-8 text-sm text-gray-500">
            <p>&copy; <span id="copyright-year"></span> StockingReport.com - Data sourced from NM Department of Game & Fish.</p>
            <p class="mt-2">
                <a href="/about.html" class="hover:underline">About</a> •
                <a href="/contact.html" class="hover:underline">Contact</a> •
                <a href="/privacy.html" class="hover:underline">Privacy Policy</a>
            </p>
        </footer>
    </div>

    <script>
        const watersList = document.getElementById('waters-list');
        const skeletonLoader = document.getElementById('skeleton-loader');
        const waterCount = document.getElementById('water-count');
        const copyrightYearSpan = document.getElementById('copyright-year');

        function getWaterUrl(waterName) {
            const filename = waterName.toLowerCase().replace(/[^a-z0-9]+/g, '-').replace(/^-+|-+$/g, '') + ".html";
            return `/public/waters/${filename}`;
        }

        async function loadWaters() {
            try {
                const response = await fetch('/stocking_data.json?v=' + new Date().getTime());
                if (!response.ok) {
                    throw new Error(`Failed to load data (${response.status})`);
                }
                const stockingData = JSON.parse(await response.text());

                const waterNames = Object.keys(stockingData).sort();
                waterCount.textContent = waterNames.length;

                watersList.innerHTML = '';
                waterNames.forEach(name => {
                    const link = document.createElement('a');
                    link.href = getWaterUrl(name);
                    link.textContent = name;
                    link.className = 'block text-blue-600 hover:underline py-1';
                    watersList.appendChild(link);
                });

                // Hide skeleton and show content
                skeletonLoader.classList.add('hidden');
                watersList.classList.remove('hidden');
            } catch (error) {
                console.error("Error loading data:", error);
                skeletonLoader.innerHTML = '<p class="text-red-600">Error loading water bodies. Please try again later.</p>';
            }
        }

        copyrightYearSpan.textContent = new Date().getFullYear();
        window.addEventListener('DOMContentLoaded', loadWaters);
    </script>
</body>
</html>
